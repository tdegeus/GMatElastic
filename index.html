<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GMatElastic: GMatElastic</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">GMatElastic<span id="projectnumber">&#160;0.5.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespaceGMatElastic.html" title="Linear elastic material model.">GMatElastic</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__home_runner_work_GMatElastic_GMatElastic_README"></a> <a href="https://github.com/tdegeus/GMatElastic/actions"><img src="https://github.com/tdegeus/GMatElastic/workflows/CI/badge.svg" alt="CI" style="pointer-events: none;" class="inline"/></a> <a href="https://tdegeus.github.io/GMatElastic"><img src="https://github.com/tdegeus/GMatElastic/workflows/gh-pages/badge.svg" alt="Doxygen -> gh-pages" style="pointer-events: none;" class="inline"/></a> <a href="https://anaconda.org/conda-forge/gmatelastic"><img src="https://img.shields.io/conda/vn/conda-forge/gmatelastic.svg" alt="Conda Version" style="pointer-events: none;" class="inline"/></a> <a href="https://anaconda.org/conda-forge/python-gmatelastic"><img src="https://img.shields.io/conda/vn/conda-forge/python-gmatelastic.svg" alt="Conda Version" style="pointer-events: none;" class="inline"/></a></p>
<p >Linear elastic material model. An overview of the theory can be found in <code>docs/theory/readme.tex</code> conveniently compiled to this <a href="docs/theory/readme.pdf">PDF</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Disclaimer</h1>
<p >This library is free to use under the <a href="https://github.com/tdegeus/GMatElastic/blob/master/LICENSE">MIT license</a>. Any additions are very much appreciated, in terms of suggested functionality, code, documentation, testimonials, word-of-mouth advertisement, etc. Bug reports or feature requests can be filed on <a href="https://github.com/tdegeus/GMatElastic">GitHub</a>. As always, the code comes with no guarantee. None of the developers can be held responsible for possible mistakes.</p>
<p >Download: <a href="https://github.com/tdegeus/GMatElastic/zipball/master">.zip file</a> | <a href="https://github.com/tdegeus/GMatElastic/tarball/master">.tar.gz file</a>.</p>
<p >(c - <a href="https://github.com/tdegeus/GMatElastic/blob/master/LICENSE">MIT</a>) T.W.J. de Geus (Tom) | <a href="#" onclick="location.href='mai'+'lto:'+'tom'+'@g'+'eus'+'.m'+'e'; return false;">tom@g<span class="obfuscator">.nosp@m.</span>eus.<span class="obfuscator">.nosp@m.</span>me</a> | www.geus.me | <a href="https://github.com/tdegeus/GMatElastic">github.com/tdegeus/GMatElastic</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Python implementation</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Partial example</h2>
<div class="fragment"><div class="line"><span class="keyword">import</span> GMatLinearElastic.Cartesian3d <span class="keyword">as</span> GMat</div>
<div class="line"> </div>
<div class="line">shape = [...]</div>
<div class="line">K = np.empty(shape)</div>
<div class="line">G = np.empty(shape)</div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">GMat.ElasticXd model(K, G);</div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">Eps = np.empty(shape + [3, 3])</div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">model.Eps = Eps</div>
<div class="line">print(model.Sig)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Installation</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Using conda</h3>
<div class="fragment"><div class="line">conda install -c conda-forge python-gmatelastic</div>
</div><!-- fragment --><p >Note that <em>xsimd</em> and hardware optimisations are <b>not enabled</b>. To enable them you have to compile on your system, as is discussed next.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
From source</h3>
<blockquote class="doxtable">
<p >&zwj; You need <em>xtensor</em>, <em>xtensor-python</em> and optionally <em>xsimd</em> as prerequisites. The easiest is to use <em>conda</em> to get the prerequisites:</p>
<div class="fragment"><div class="line">conda install -c conda-forge xtensor xsimd xtensor-python</div>
</div><!-- fragment --><p >If you then compile and install with the same environment you should be good to go. Otherwise, a bit of manual labour might be needed to treat the dependencies. </p>
</blockquote>
<div class="fragment"><div class="line">git checkout https://github.com/tdegeus/GMatElastic.git</div>
<div class="line">cd GMatElastic</div>
<div class="line"> </div>
<div class="line"># Only if you want to use hardware optimisation:</div>
<div class="line">export SKBUILD_CONFIGURE_OPTIONS=&quot;-DUSE_SIMD=1&quot;</div>
<div class="line"> </div>
<div class="line">python -m pip install . -v</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
C++ implementation</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
Partial example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;GMatLinearElastic/Cartesian3d.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>GMat = GMatLinearElastic::Cartesian3d;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> rank = ...;</div>
<div class="line"> </div>
<div class="line">    xt::xtensor&lt;double, rank&gt; K = ...;</div>
<div class="line">    xt::xtensor&lt;double, rank&gt; G = ...;</div>
<div class="line"> </div>
<div class="line">    GMat::ElasticXd model(K, G);</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    xt::xtensor&lt;double, rank + 2&gt; Eps;</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// all necessary computation are done at this point</span></div>
<div class="line">    model.set_Eps(Eps);</div>
<div class="line">    ...</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// get reference to stress</span></div>
<div class="line">    <span class="keyword">auto</span> Sig = model.Sig();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Installation</h2>
<h3><a class="anchor" id="autotoc_md10"></a>
Using conda</h3>
<div class="fragment"><div class="line">conda install -c conda-forge gmatelastic</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11"></a>
From source</h3>
<div class="fragment"><div class="line">git checkout https://github.com/tdegeus/GMatElastic.git</div>
<div class="line">cd GMatElastic</div>
<div class="line"> </div>
<div class="line">cmake -Bbuild</div>
<div class="line">cd build</div>
<div class="line">cmake --install .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Compiling</h2>
<h2><a class="anchor" id="autotoc_md13"></a>
Using CMake</h2>
<h3><a class="anchor" id="autotoc_md14"></a>
Example</h3>
<p >Your <code>CMakeLists.txt</code> can be as follows</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.1)</div>
<div class="line">project(example)</div>
<div class="line">find_package(GMatElastic REQUIRED)</div>
<div class="line">add_executable(example example.cpp)</div>
<div class="line">target_link_libraries(example PRIVATE GMatElastic)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md15"></a>
Targets</h3>
<p >The following targets are available:</p>
<ul>
<li><code><a class="el" href="namespaceGMatElastic.html" title="Linear elastic material model.">GMatElastic</a></code> Includes the library and its dependencies.</li>
<li><code>GMatElastic::assert</code> Enables IO-assertions by defining <code>GMATELASTIC_ENABLE_ASSERT</code>.</li>
<li><code>GMatElastic::debug</code> Enables assertions of all dependencies.</li>
<li><code>GMatElastic::compiler_warings</code> Enables compiler warnings (generic).</li>
</ul>
<h3><a class="anchor" id="autotoc_md16"></a>
Optimisation</h3>
<p >It is advised to think about compiler optimisation and enabling <em>xsimd</em>. Using <em>CMake</em> this can be done using the <code>xtensor::optimize</code> and <code>xtensor::use_xsimd</code> targets. The above example then becomes:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.1)</div>
<div class="line">project(example)</div>
<div class="line">find_package(GMatElastic REQUIRED)</div>
<div class="line">find_package(xtensor REQUIRED)</div>
<div class="line">find_package(xsimd REQUIRED)</div>
<div class="line">add_executable(example example.cpp)</div>
<div class="line">target_link_libraries(example PRIVATE</div>
<div class="line">    GMatElastic</div>
<div class="line">    xtensor::optimize</div>
<div class="line">    xtensor::use_xsimd)</div>
</div><!-- fragment --><p >See the <a href="https://xtensor.readthedocs.io/en/latest/">documentation of xtensor</a>.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
By hand</h2>
<p >Presuming that the compiler is <code>c++</code>, compile using:</p>
<div class="fragment"><div class="line">c++ -I/path/to/GMatElastic/include ...</div>
</div><!-- fragment --><p >Note that you have to take care of the <em>xtensor</em> dependency, the C++ version, optimisation, enabling <em>xsimd</em>, ...</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Using pkg-config</h2>
<p >Presuming that the compiler is <code>c++</code>, compile using:</p>
<div class="fragment"><div class="line">c++ `pkg-config --cflags GMatElastic` ...</div>
</div><!-- fragment --><p >Note that you have to take care of the <em>xtensor</em> dependency, the C++ version, optimization, enabling <em>xsimd</em>, ...</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Upgrading instructions</h1>
<h2><a class="anchor" id="autotoc_md20"></a>
Upgrading to &gt;v0.4.*</h2>
<p >The individual material point and the array of material points was fully integrated. In addition, the number of copies was reduced.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
C++</h3>
<p >There is only a single class <code>Elastic</code>. It's functions where renamed:</p>
<ul>
<li><code>.setStrain(...)</code> -&gt; <code>.set_Eps(...)</code></li>
<li><code>.Stress()</code> -&gt; <code>.Sig()</code> (now returns a reference).</li>
<li><code>.stress(...)</code>: deprecated.</li>
<li><code>.Tangent()</code> -&gt; <code>.C()</code> (now returns a reference).</li>
<li><code>.tangent(...)</code>: deprecated.</li>
</ul>
<h3><a class="anchor" id="autotoc_md22"></a>
Python</h3>
<p >There is only a single class <code>Elastic</code>. It's functions are converted to properties:</p>
<ul>
<li><code>.setStrain(...)</code> -&gt; <code>.Eps = ...</code></li>
<li><code>.Stress()</code> -&gt; <code>.Sig</code> (now returns a reference).</li>
<li><code>.stress(...)</code>: deprecated.</li>
<li><code>.Tangent()</code> -&gt; <code>.C</code> (now returns a reference).</li>
<li><code>.tangent(...)</code>: deprecated.</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Upgrading to &gt;v0.2.*</h2>
<p ><code>xtensor_fixed</code> was completely deprecated in v0.2.0, as were the type aliases <code>Tensor2</code> and <code>Tensor4</code>. Please update your code as follows:</p>
<ul>
<li><code>Tensor2</code> -&gt; <code>xt::xtensor&lt;double, 2&gt;</code>.</li>
<li><code>Tensor4</code> -&gt; <code>xt::xtensor&lt;double, 4&gt;</code>.</li>
</ul>
<p ><b>Tip:</b> Used <code>auto</code> as return type as much as possible. This simplifies implementation, and renders is less subjective to library return type changes.</p>
<p >Compared to v0.1.0, v0.2.0 has some generalisations and efficiency updates. This requires the following changes:</p>
<ul>
<li><code>Matrix</code> has been generalised to <code>Array&lt;rank&gt;</code>. Practically this requires changing:<ul>
<li><code>Matrix</code> to <code>Array&lt;2&gt;</code> in C++.</li>
<li><code>Matrix</code> to <code>Array2d</code> in Python. Note that <code>Array1d</code>, <code>Array3d</code>, are also available.</li>
</ul>
</li>
<li><code>Array&lt;rank&gt;.check</code> -&gt; ```cpp if (xt::any(xt::equal(array.type(), Type::Unset))) { throw std::runtime_error("Please set all points"); } ``` Note however that it is no longer required to set all points, unset points are filled-up with zeros.</li>
<li>Strain is now stored as a member. Functions like <code>stress</code> now return the state based on the last specified strain, specified using <code>setStrain(Esp)</code>. This leads to the following changes:<ul>
<li><code>stress</code>: no argument.</li>
<li><code>tangent</code>: no argument, single return value (no longer returns stress).</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
Change-log</h1>
<h2><a class="anchor" id="autotoc_md25"></a>
v0.5.0</h2>
<ul>
<li>Making functions virtual for override</li>
<li>Minor code style updates</li>
</ul>
<h2><a class="anchor" id="autotoc_md26"></a>
v0.4.0</h2>
<p >Complete API overhaul.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
v0.3.0</h2>
<p >Complete API overhaul.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
v0.2.2</h2>
<ul>
<li>Using scikit-build, setuptools_scm, xtensor-python (#21)</li>
<li>CMake clean-up (#21)</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
v0.2.1</h2>
<ul>
<li>Adding missing overload Python API (#20).</li>
</ul>
<h2><a class="anchor" id="autotoc_md30"></a>
v0.2.0</h2>
<p >Compared to v0.1.0, v0.2.0 has some generalisations and efficiency updates. This requires the following changes:</p>
<ul>
<li><code>Matrix</code> has been generalised to <code>Array&lt;rank&gt;</code>. Practically this requires changing:<ul>
<li><code>Matrix</code> to <code>Array&lt;2&gt;</code> in C++.</li>
<li><code>Matrix</code> to <code>Array2d</code> in Python. Note that <code>Array1d</code>, <code>Array3d</code>, are also available.</li>
</ul>
</li>
<li><code>Array</code> now sets zeros for all <code>Type::Unset</code> points. The function <code>check</code> is deprecated accordingly.</li>
<li>Strain is now stored as a member. Functions like <code>stress</code> now return the state based on the last specified strain, specified using <code>set_Eps(Esp)</code>. This leads to the following changes:<ul>
<li><code>stress</code>: no argument.</li>
<li><code>tangent</code>: no argument, single return value (no longer returns stress).</li>
</ul>
</li>
<li>Tensor operations are now provided centrally in the GMat eco-system, by <a class="el" href="namespaceGMatTensor.html" title="Tensor products / operations.">GMatTensor</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
